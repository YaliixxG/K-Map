---
title: Http 2.0的多路复用
---
# <font color="#8B008B">Http 2.0的多路复用</font> 

### http 1.0
同一域名，一次只能发一个请求，如果要发多个请求的话，必须上一个请求结束后才能发送第二个请求，要建立多次HTTP连接。

### http 1.0 + Keep-Alive
同一域名，可以一次发多个请求，但是只建立一次HTTP连接。
但是依然存在效率问题：  
1. 串行的文件传输。当请求a文件时，b文件只能等待，等待a连接到服务器、服务器处理文件、服务器返回文件，这三个步骤。我们假设这三步用时都是1秒，那么a文件用时为3秒，b文件传输完成用时为6秒，依此类推。（注：此项计算有一个前提条件，就是浏览器和服务器是单通道传输）
2. 连接数过多。我们假设Apache设置了最大并发数为300，因为浏览器限制，浏览器发起的最大请求数为6，也就是服务器能承载的最高并发为50，当第51个人访问时，就需要等待前面某个请求处理完成。  

简单来说，就是多个请求，同一时刻还是只能执行一个连接。  

### http 2.0  

http 2.0多路复用，解决了上述问题，在同一个TCP连接，同一时刻可以传输多个HTTP请求。  

http2的传输是基于二进制帧的。每一个TCP连接中承载了多个双向流通的流，每一个流都有一个独一无二的标识和优先级，而流就是由二进制帧组成的。二进制帧的头部信息会标识自己属于哪一个流，所以这些帧是可以交错传输，然后在接收端通过帧头的信息组装成完整的数据。这样就解决了线头阻塞的问题，同时也提高了网络速度的利用率。