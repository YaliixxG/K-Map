<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React | YaliixxG ❤</title>
    <meta name="description" content="自我学习的前端知识点整理以及拓展和debug。">
    <link rel="icon" href="/favicon.png">
  <link rel="manifest" href="/manifest.json">
    
    <link rel="preload" href="/assets/css/0.styles.c052ab42.css" as="style"><link rel="preload" href="/assets/js/app.b57ebd10.js" as="script"><link rel="preload" href="/assets/js/10.c0676710.js" as="script"><link rel="prefetch" href="/assets/js/11.03357928.js"><link rel="prefetch" href="/assets/js/12.ab339980.js"><link rel="prefetch" href="/assets/js/13.f7016b66.js"><link rel="prefetch" href="/assets/js/14.3bce5075.js"><link rel="prefetch" href="/assets/js/15.bdff2bff.js"><link rel="prefetch" href="/assets/js/16.1f1f2d44.js"><link rel="prefetch" href="/assets/js/17.de3634c8.js"><link rel="prefetch" href="/assets/js/18.a6e80b9b.js"><link rel="prefetch" href="/assets/js/19.a915318b.js"><link rel="prefetch" href="/assets/js/2.63b58643.js"><link rel="prefetch" href="/assets/js/20.eba4b7b6.js"><link rel="prefetch" href="/assets/js/21.3c3cfe5a.js"><link rel="prefetch" href="/assets/js/22.7deccff2.js"><link rel="prefetch" href="/assets/js/23.d09eb040.js"><link rel="prefetch" href="/assets/js/24.f943fd3c.js"><link rel="prefetch" href="/assets/js/25.4def3c3a.js"><link rel="prefetch" href="/assets/js/26.e6712eca.js"><link rel="prefetch" href="/assets/js/27.fc1ee94f.js"><link rel="prefetch" href="/assets/js/28.ba4b43f2.js"><link rel="prefetch" href="/assets/js/29.36ce28db.js"><link rel="prefetch" href="/assets/js/3.e1f611cc.js"><link rel="prefetch" href="/assets/js/30.a3de5756.js"><link rel="prefetch" href="/assets/js/31.3edb6646.js"><link rel="prefetch" href="/assets/js/32.8744b77b.js"><link rel="prefetch" href="/assets/js/33.bbca3929.js"><link rel="prefetch" href="/assets/js/34.5e131923.js"><link rel="prefetch" href="/assets/js/35.1619cc51.js"><link rel="prefetch" href="/assets/js/36.0cccedf0.js"><link rel="prefetch" href="/assets/js/37.09f70970.js"><link rel="prefetch" href="/assets/js/38.c6210071.js"><link rel="prefetch" href="/assets/js/39.b5f9bf46.js"><link rel="prefetch" href="/assets/js/4.5a58363d.js"><link rel="prefetch" href="/assets/js/40.065197a7.js"><link rel="prefetch" href="/assets/js/41.f4f11f86.js"><link rel="prefetch" href="/assets/js/42.e20fe71d.js"><link rel="prefetch" href="/assets/js/43.45fe2510.js"><link rel="prefetch" href="/assets/js/44.23b3830e.js"><link rel="prefetch" href="/assets/js/45.26b356e7.js"><link rel="prefetch" href="/assets/js/46.ba63aa9a.js"><link rel="prefetch" href="/assets/js/47.6aeaa205.js"><link rel="prefetch" href="/assets/js/48.09c26d8d.js"><link rel="prefetch" href="/assets/js/49.7685725d.js"><link rel="prefetch" href="/assets/js/5.3111682a.js"><link rel="prefetch" href="/assets/js/50.edfaa49a.js"><link rel="prefetch" href="/assets/js/51.85d445a6.js"><link rel="prefetch" href="/assets/js/52.750fc278.js"><link rel="prefetch" href="/assets/js/53.20fc4a79.js"><link rel="prefetch" href="/assets/js/54.c96fd6bd.js"><link rel="prefetch" href="/assets/js/55.6b2ebd46.js"><link rel="prefetch" href="/assets/js/56.525da6cd.js"><link rel="prefetch" href="/assets/js/57.63d444bb.js"><link rel="prefetch" href="/assets/js/58.976fba56.js"><link rel="prefetch" href="/assets/js/59.20abf3a5.js"><link rel="prefetch" href="/assets/js/6.398f1e3d.js"><link rel="prefetch" href="/assets/js/60.4cc9ca2f.js"><link rel="prefetch" href="/assets/js/61.eb7e6418.js"><link rel="prefetch" href="/assets/js/62.6610c6b3.js"><link rel="prefetch" href="/assets/js/63.d1668a66.js"><link rel="prefetch" href="/assets/js/64.255b68b0.js"><link rel="prefetch" href="/assets/js/65.061f6bbf.js"><link rel="prefetch" href="/assets/js/66.0f8a7538.js"><link rel="prefetch" href="/assets/js/67.2e8941b2.js"><link rel="prefetch" href="/assets/js/68.4660e6a8.js"><link rel="prefetch" href="/assets/js/69.bbb99df1.js"><link rel="prefetch" href="/assets/js/7.b74a4338.js"><link rel="prefetch" href="/assets/js/70.dfee64ea.js"><link rel="prefetch" href="/assets/js/71.1f7ecd50.js"><link rel="prefetch" href="/assets/js/72.55817294.js"><link rel="prefetch" href="/assets/js/73.f355fa30.js"><link rel="prefetch" href="/assets/js/74.349d2a68.js"><link rel="prefetch" href="/assets/js/75.400d880f.js"><link rel="prefetch" href="/assets/js/76.20e4d388.js"><link rel="prefetch" href="/assets/js/77.90620ff3.js"><link rel="prefetch" href="/assets/js/78.2f8bb5a8.js"><link rel="prefetch" href="/assets/js/79.83d7bb75.js"><link rel="prefetch" href="/assets/js/8.d99510a6.js"><link rel="prefetch" href="/assets/js/80.c0a81beb.js"><link rel="prefetch" href="/assets/js/81.ea9b4dc8.js"><link rel="prefetch" href="/assets/js/9.2e3604f5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c052ab42.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YaliixxG ❤</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Guide/" class="nav-link">前言</a></div><div class="nav-item"><a href="https://yaliixxg.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hexo博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/YaliixxG/K-Map" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/Guide/" class="nav-link">前言</a></div><div class="nav-item"><a href="https://yaliixxg.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Hexo博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/YaliixxG/K-Map" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>前端杂记</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>数据结构</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>基础</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>DEBUG</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/debug/aboutTerminal.html" class="sidebar-link">终端</a></li><li><a href="/debug/aboutReact.html" class="active sidebar-link">React</a></li><li><a href="/debug/aboutVue.html" class="sidebar-link">Vue</a></li><li><a href="/debug/aboutMac.html" class="sidebar-link">Mac</a></li><li><a href="/debug/aboutMock.html" class="sidebar-link">Mock</a></li><li><a href="/debug/aboutTypeScript.html" class="sidebar-link">TypeScript</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>阅读</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>代码</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="react"><a href="#react" aria-hidden="true" class="header-anchor">#</a> React</h1> <h4 id="_1-shouldcomponentupdate"><a href="#_1-shouldcomponentupdate" aria-hidden="true" class="header-anchor">#</a> 1. <em>shouldComponentUpdate</em></h4> <p>答：（props,state 有更新，是否出触发）这个周期函数必须返回一个布尔值，否则会报错，并且必须写在父容器（父组件），否则无效。</p> <h4 id="_2-使用ant-design时，ui-组件上设置classname-style-xxx-时，样式无效"><a href="#_2-使用ant-design时，ui-组件上设置classname-style-xxx-时，样式无效" aria-hidden="true" class="header-anchor">#</a> 2. <em>使用<code>ant-design</code>时，UI 组件上设置<code>className={style.xxx}</code>时，样式无效</em></h4> <p>答：如果是修改 UI 组件的样式，需设置为<code>className=&quot;xxx&quot;</code>，在全局中修改即可生效（:global{...})</p> <h4 id="_3-在-dva-中使用this-props-dispatch报错-this-props-dispatch-is-not-a-function"><a href="#_3-在-dva-中使用this-props-dispatch报错-this-props-dispatch-is-not-a-function" aria-hidden="true" class="header-anchor">#</a> 3. <em>在 dva 中使用<code>this.props.dispatch</code>报错 _this.props.dispatch is not a function</em></h4> <p>答：引入<code>connect</code>,然后再在 <code>class XXX extends component</code>上面写<code>@connect</code>即可</p> <p><img src="/assets/img/react-01.34217c07.png" alt="示例"></p> <h4 id="_4-reactjs-项目本地测试出错：failed-to-compile-module-not-found-does-not-match-the-corresponding-path-on-disk"><a href="#_4-reactjs-项目本地测试出错：failed-to-compile-module-not-found-does-not-match-the-corresponding-path-on-disk" aria-hidden="true" class="header-anchor">#</a> 4. ReactJs 项目本地测试出错：<em>Failed to compile Module not found does not match the corresponding path on disk</em></h4> <p>答：看下是具体哪个文件不匹配名字，手动改下即可</p> <h4 id="_5-子组件中打印this-props为空对象？"><a href="#_5-子组件中打印this-props为空对象？" aria-hidden="true" class="header-anchor">#</a> 5. <em>子组件中打印<code>this.props</code>为空对象？</em></h4> <p>答：因为父组件中没有传递<code>props</code>给子组件，所以子组件拿不到...在父组件中传递<code>props</code>过来即可。</p> <h4 id="_6-当使用antd-dva时，路由和导航组件无法共同绑定切换"><a href="#_6-当使用antd-dva时，路由和导航组件无法共同绑定切换" aria-hidden="true" class="header-anchor">#</a> 6. <em>当使用<code>antd + dva</code>时，路由和导航组件无法共同绑定切换</em></h4> <p>答： 使用<code>antd</code>中的<code>selectedKeys</code>来实现这个功能，原理是<code>selectedKeys</code>是个数组，数组里面的值是什么，<code>url</code>上的路由路径就是什么，导航组件就会展示那个页面。所以我们要根据<code>this.props.location.path</code>来拿到路由的路劲，然后我们在赋值给<code>selectedKeys</code>，在页面组件加载完成时<code>componentDidMount</code>进行调用。但是会出现另外一个小问题，此时还应该在<code>UNSAFE_componentWillReceiveProps</code>中调用下这个方法，就是当<code>props</code>发生变化时，也需调用这个方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//先定义</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
        collapsed<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        selectedKeys<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//在导航组件中添加此属性</span>
<span class="token operator">&lt;</span>Menu
    defaultSelectedKeys<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'welcome'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
    selectedKeys<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectedKeys<span class="token punctuation">}</span>
    defaultOpenKeys<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">'sub1'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
    mode<span class="token operator">=</span><span class="token string">&quot;inline&quot;</span>
    theme<span class="token operator">=</span><span class="token string">&quot;dark&quot;</span>
<span class="token operator">&gt;</span>
    <span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Menu<span class="token operator">&gt;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//定义方法，拿到 url 路由路径，并赋值给 selectedKeys</span>
  <span class="token function-variable function">handleSelectKeys</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">pathname</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> temp <span class="token operator">=</span> pathname<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> key <span class="token operator">=</span> temp <span class="token operator">&amp;&amp;</span> temp<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token string">'welcome'</span> <span class="token punctuation">:</span> temp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      selectedKeys<span class="token punctuation">:</span> <span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token comment">//在两个生命周期中都要进行调用</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSelectKeys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">UNSAFE_componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> props <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps <span class="token operator">!==</span> props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSelectKeys</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="_7-使用antd导航栏无选中效果"><a href="#_7-使用antd导航栏无选中效果" aria-hidden="true" class="header-anchor">#</a> 7. <em>使用<code>antd</code>导航栏无选中效果</em></h4> <p>答：检查没有效果的导航菜单项目，是不是<code>key</code>没有设置好。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token operator">&lt;</span>Menu<span class="token punctuation">.</span>Item key<span class="token operator">=</span><span class="token string">&quot;admin&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;/admin&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">&quot;inbox&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>管理<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Menu<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span>
</code></pre></div><h4 id="_8-根据下拉框来进行条件渲染时，始终无法加载对应的组件？"><a href="#_8-根据下拉框来进行条件渲染时，始终无法加载对应的组件？" aria-hidden="true" class="header-anchor">#</a> 8. 根据下拉框来进行条件渲染时，始终无法加载对应的组件？</h4> <p>答：无状态组件是无法加载的，必须是有状态组件，另外设置状态必须是用<code>this.setState</code>来进行设置，否则无法更改状态。
改变下拉框选项值利用<code>onChange</code>方法来拿到值，再利用这个值来进行不同组件的渲染。记得要在结构中调用这个方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//下拉框</span>
<span class="token operator">&lt;</span>Select
    placeholder<span class="token operator">=</span><span class="token string">&quot;请选择&quot;</span>
    defaultValue<span class="token operator">=</span><span class="token string">&quot;改变DOM&quot;</span>
    allowClears
    style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token punctuation">:</span> <span class="token number">465</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
    onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChangeDom<span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Select<span class="token punctuation">.</span>Option key<span class="token operator">=</span><span class="token string">&quot;0&quot;</span><span class="token operator">&gt;</span><span class="token constant">DOM0</span><span class="token operator">&lt;</span><span class="token operator">/</span>Select<span class="token punctuation">.</span>Option<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Select<span class="token punctuation">.</span>Option key<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span><span class="token constant">DOM1</span><span class="token operator">&lt;</span><span class="token operator">/</span>Select<span class="token punctuation">.</span>Option<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Select<span class="token punctuation">.</span>Option key<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span><span class="token constant">DOM2</span><span class="token operator">&lt;</span><span class="token operator">/</span>Select<span class="token punctuation">.</span>Option<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Select<span class="token punctuation">.</span>Option key<span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span><span class="token constant">DOM3</span><span class="token operator">&lt;</span><span class="token operator">/</span>Select<span class="token punctuation">.</span>Option<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Select<span class="token punctuation">.</span>Option key<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span><span class="token constant">DOM4</span><span class="token operator">&lt;</span><span class="token operator">/</span>Select<span class="token punctuation">.</span>Option<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Select<span class="token operator">&gt;</span>
<span class="token comment">//拿值</span>
<span class="token function-variable function">handleChangeDom</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      selectTypeNum<span class="token punctuation">:</span> value
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectDom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//根据值改变DOM</span>
<span class="token function-variable function">selectDom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> selectTypeNum <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>selectTypeNum<span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>selectTypeNum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">case</span> <span class="token string">'0'</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token comment">// 位置异常</span>
          <span class="token constant">DOM0</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="_9-在this-setstate-修改值后，利用这个值进行操作无效？"><a href="#_9-在this-setstate-修改值后，利用这个值进行操作无效？" aria-hidden="true" class="header-anchor">#</a> 9. 在<code>this.setState({})</code>修改值后，利用这个值进行操作无效？</h4> <p>答：<code>this.setState({})</code>为异步，马上进行操作很可能会拿不到这个值，所以需要在<code>this.setState({})</code>的回调中，进行操作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
        key<span class="token punctuation">:</span> <span class="token string">'1'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'在这里写操作代码！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_10-使用ant-design框架时，发现使用导航和路由进行页面跳转有一个-bug，就是改变地址栏路由路径时，页面进行了跳转，但是导航的选择状态却没有-随之进行改变，这个要怎么解决呢？"><a href="#_10-使用ant-design框架时，发现使用导航和路由进行页面跳转有一个-bug，就是改变地址栏路由路径时，页面进行了跳转，但是导航的选择状态却没有-随之进行改变，这个要怎么解决呢？" aria-hidden="true" class="header-anchor">#</a> 10. 使用<code>Ant-Design</code>框架时，发现使用导航和路由进行页面跳转有一个 BUG，就是改变地址栏路由路径时，页面进行了跳转，但是导航的选择状态却没有  随之进行改变，这个要怎么解决呢？</h4> <p>答：我们在<code>antd</code>的文档中可以发现<code>selectedKeys</code>的值是用来变化导航的选择状态的，它的值是一个数组，数组里面的值则是它导航当前选择的值，所以我们需要通过这个值来进行变化。</p> <ul><li>点击时，通过改变<code>selectedKeys</code>来进行  变化</li> <li>改变路由路径时，通过在<code>componentDidMount</code>和<code>componentWillReceiveProps</code>中  来控制<code>selectedKeys</code>进行变化。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>     <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
          current<span class="token punctuation">:</span> <span class="token string">''</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token operator">...</span>
    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSelectedKeys</span><span class="token punctuation">(</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 解决导航selectedKeys 与路由路径不匹配的问题</span>
  <span class="token function">componentWillReceiveProps</span><span class="token punctuation">(</span><span class="token parameter">nextProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token comment">// 获取当前的路径</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> pathname <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>location<span class="token punctuation">;</span>

      <span class="token comment">// 如果下一个props中获取的路径和当前的路径不一致，则通过handleSelectedKeys方法，来更改当前current</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname <span class="token operator">!==</span> pathname<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSelectedKeys</span><span class="token punctuation">(</span>nextProps<span class="token punctuation">.</span>location<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">handleSelectedKeys</span> <span class="token operator">=</span> <span class="token parameter">pathname</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> temp <span class="token operator">=</span> pathname<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 路径的长度小于2的话，则是代表现在是根路径，所以让其导航到首页</span>
      <span class="token keyword">const</span> key <span class="token operator">=</span> temp <span class="token operator">&amp;&amp;</span> temp<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token string">'home'</span> <span class="token punctuation">:</span> temp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          current<span class="token punctuation">:</span> key
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_11-使用ant-design框架时，用到-input-输入框，但是不想利用value值来清空时，有没有更简便的方法？"><a href="#_11-使用ant-design框架时，用到-input-输入框，但是不想利用value值来清空时，有没有更简便的方法？" aria-hidden="true" class="header-anchor">#</a> 11. 使用<code>Ant-Design</code>框架时，用到 Input 输入框，但是不想利用<code>value</code>值来清空时，有没有更简便的方法？</h4> <p>答：虽然不是好方法，但是的确是简便的，给需要清空的 Input 组件设置 id 值，然后进行清空。</p> <div class="language-js extra-class"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'searchCategory'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_12-无状态组件是否不能重新更改状态，不能刷新页面？"><a href="#_12-无状态组件是否不能重新更改状态，不能刷新页面？" aria-hidden="true" class="header-anchor">#</a> 12. 无状态组件是否不能重新更改状态，不能刷新页面？</h4> <p>答：数据驱动视图进行变化，你改变了数据，视图就会刷新。</p> <h4 id="_13-有时候会出现找不到属性的情况，导致报错，页面无法加载？"><a href="#_13-有时候会出现找不到属性的情况，导致报错，页面无法加载？" aria-hidden="true" class="header-anchor">#</a> 13. 有时候会出现找不到属性的情况，导致报错，页面无法加载？</h4> <p>答：在要用到<code>xx.a</code>或者<code>xx[0].a</code>，这种情况时，记得要判断<code>xx</code>是否存在，如果存在则赋值，否则给个默认值。这样就可以保证在没有获取到数据时，依然可以保证程序顺畅的进行。</p> <h4 id="_14-组件有列表循环渲染时，发现进行后台分页切换时，列表中残余了上一次的数据，导致显示的数据多余规定的pagesize，这种情况是怎么回事呢？"><a href="#_14-组件有列表循环渲染时，发现进行后台分页切换时，列表中残余了上一次的数据，导致显示的数据多余规定的pagesize，这种情况是怎么回事呢？" aria-hidden="true" class="header-anchor">#</a> 14. 组件有列表循环渲染时，发现进行后台分页切换时，列表中残余了上一次的数据，导致显示的数据多余规定的pageSize，这种情况是怎么回事呢？</h4> <p>答：这个跟<code>key</code>的不唯一性有关，因为如果你的<code>key</code>不唯一，就不会进行更新，仍然会留在页面上，所以一定要保持<code>key</code>的唯一性才可以完全确保每一条都是你请求的最新数据。</p> <h4 id="_15-setstate以后，居然没有拿到值，是undefined？"><a href="#_15-setstate以后，居然没有拿到值，是undefined？" aria-hidden="true" class="header-anchor">#</a> 15. <code>setState</code>以后，居然没有拿到值，是<code>undefined</code>？</h4> <p>答：可以检查下在函数里面更改state值时，是否没有正确拿到值了，这种情况很可能是函数的参数没有默认值，导致赋值出现<code>undefined</code>。</p> <h4 id="_16-invariant-violation-element-type-is-invalid-expected-a-string-for-built-in-components-or-a-class-function-for-composite-components-but-got-undefined-you-likely-forgot-to-export-your-component-from-the-file-it-s-defined-in"><a href="#_16-invariant-violation-element-type-is-invalid-expected-a-string-for-built-in-components-or-a-class-function-for-composite-components-but-got-undefined-you-likely-forgot-to-export-your-component-from-the-file-it-s-defined-in" aria-hidden="true" class="header-anchor">#</a> 16. <code>Invariant Violation: Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: undefined ...You likely forgot to export your component from the file it's defined in...</code></h4> <p>答：问题可能出在 <code>export</code> 或者 <code>export default</code>的用法搞混了，引入的 <code>{}</code> 要检查是否要加；另外还有可能是你的代码中间有一个元素是无效的，一个字符串或者一个类或函数命名出错。例如我这次就是解构写法写错了，导致了这个问题。</p> <h4 id="_17-用antd框架中upload上传组件时，如何在beforeupload中异步获取action，并同步修改执行？"><a href="#_17-用antd框架中upload上传组件时，如何在beforeupload中异步获取action，并同步修改执行？" aria-hidden="true" class="header-anchor">#</a> 17. 用<code>antd</code>框架中<code>upload</code>上传组件时，如何在<code>beforeUpload</code>中异步获取action，并同步修改执行？</h4> <p>答：使用 <code>async</code>和<code>await</code>来解决这个问题。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Upload<span class="token punctuation">,</span> Button<span class="token punctuation">,</span> Icon <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'dtd'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    state <span class="token operator">=</span> <span class="token punctuation">{</span>
        actionDo<span class="token punctuation">:</span> <span class="token string">'https://www.mocky.io/v2/5cc8019d300000980a055e76'</span><span class="token punctuation">,</span>
        url<span class="token punctuation">:</span> <span class="token string">'aaa'</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">setTime</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>
                    <span class="token punctuation">{</span>
                        actionDo<span class="token punctuation">:</span> <span class="token string">'改变之后的actionDo'</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'演示器actionDo'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>actionDo<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">beforeUpload</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'上传之前'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>actionDo<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'最后'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>actionDo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Upload
                    name<span class="token operator">=</span><span class="token string">&quot;file&quot;</span>
                    action<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>actionDo<span class="token punctuation">}</span>
                    beforeUpload<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>beforeUpload<span class="token punctuation">}</span>
                <span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>Button<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>Icon type<span class="token operator">=</span><span class="token string">&quot;upload&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span> Click to Upload
                    <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Upload<span class="token operator">&gt;</span>
                <span class="token punctuation">,</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>操作结果如下：</p> <p><img src="/assets/img/upload.e99d294f.png" alt="示例"></p> <p>action改变：<br> <img src="/assets/img/action.94aa28c7.png" alt="示例"></p> <h4 id="_18-跳转到相同的路径下，生命周期不执行？组件不更新？"><a href="#_18-跳转到相同的路径下，生命周期不执行？组件不更新？" aria-hidden="true" class="header-anchor">#</a> 18. 跳转到相同的路径下，生命周期不执行？组件不更新？</h4> <p>答：在项目中碰到在同一路径下，进行了某些设置需要重新刷新此页面的情况，但是却出现了生命周期函数中的代码不执行，数据没有更新的情况。有两种方法可以刷新：<br>
1. 刷新整个页面，history.go(0) 但是这样体验效果并不好<br>
2. 先访问一个空路径，一个不存在的路径，然后再访问到原路径来，这样可以解决问题并且用户无感知</p> <h4 id="_19-使用antd时，发现当一个页面表单form的元素超过一个时，重置会将此页面表单全部重置掉？"><a href="#_19-使用antd时，发现当一个页面表单form的元素超过一个时，重置会将此页面表单全部重置掉？" aria-hidden="true" class="header-anchor">#</a> 19. 使用<code>antd</code>时，发现当一个页面表单<code>Form</code>的元素超过一个时，重置会将此页面表单全部重置掉？</h4> <p>答：这个问题是出在，你创建一个统一的表单元素时，本页面<code>this.props.form</code>没有具体到哪一个表单，所以当你用<code>this.props.form</code>调用API时会发现会作用在所有的表单元素上；此时你可以将每个表单分开进行注册，这样的话就可以让每个表单进行区分；也可以在开始写的时候就单独分开写，这样会方便很多。</p> <h4 id="_20-当父组件一个控件值改变时，子组件并没有重新render"><a href="#_20-当父组件一个控件值改变时，子组件并没有重新render" aria-hidden="true" class="header-anchor">#</a> 20. 当父组件一个控件值改变时，子组件并没有重新render?</h4> <p>答：可以给子组件加一个key值，这样就可以根据值即时刷新。</p></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/YaliixxG/K-Map/edit/master/docs/debug/aboutReact.md" target="_blank" rel="noopener noreferrer">编辑页面</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">3/26/2020, 5:46:33 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/debug/aboutTerminal.html" class="prev">
          终端
        </a></span> <span class="next"><a href="/debug/aboutVue.html">
          Vue
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.b57ebd10.js" defer></script><script src="/assets/js/10.c0676710.js" defer></script>
  </body>
</html>
